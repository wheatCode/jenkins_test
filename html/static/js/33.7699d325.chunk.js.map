{"version":3,"sources":["pages/HikingFrontend/Verify2.js"],"names":["useStyles","makeStyles","theme","container","display","flexDirection","height","width","root","margin","spacing","justifyContent","padding","textField","bottomBoard","createMuiTheme","palette","primary","light","main","dark","contrastText","api","axios","create","baseURL","Verify2","props","classes","useState","code_one","code_two","code_three","code_four","submitted","state","setState","codeOneInput","useRef","codeTwoInput","codeThreeInput","codeFourInput","number1","setNumber1","number2","setNumber2","number3","setNumber3","number4","setNumber4","headers","localStorage","getItem","console","log","handleCodeChange","e","target","id","value","length","prevState","current","focus","backspaceTrigger","keyCode","code","setCode","continueButton","a","firstUpdate","useLayoutEffect","postBack","history","useHistory","error","setError","makesure","setMakesure","responsedJson","post","then","response","data","setItem","JSON","stringify","parse","push","catch","errorText","finally","emailHeaders","resentButton","className","style","fontSize","fontWeight","color","noValidate","autoComplete","autoFocus","inputRef","onChange","onKeyDown","sytyle","position","zIndex","disabled","onClick","variant","backgroundColor","borderColor","maxWidth","Height","borderRadius"],"mappings":"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","file":"static/js/33.7699d325.chunk.js","sourcesContent":["import React, {useState, useRef, useEffect, useLayoutEffect} from 'react';\nimport {createMuiTheme, makeStyles, ThemeProvider} from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport {useHistory} from 'react-router-dom';\n\nimport Hidden from '@material-ui/core/Hidden';\nimport Paper from '@material-ui/core/Paper';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\n\nconst useStyles = makeStyles((theme)=>({\n    container: {\n        display:'flex',\n        flexDirection: 'column',  // flexDirection:'column' 使button strech 開來\n        height: '768px',\n        // width: '411px',\n        width: '100%'\n      },\n      root: {\n        '& > *': {\n          margin: theme.spacing(1),\n          width: '25ch',\n        },\n        display: 'flex',\n        justifyContent: 'space-around',\n        padding: '0 73px 0 74px',\n        // flexWrap: 'wrap',\n      },\n      textField:{\n          width: '54px',\n          height: '40px',\n          margin: '48px 0 0',\n          padding: '9px 0 0',\n      },\n}))\nconst bottomBoard = createMuiTheme({\n  palette: {\n    primary: {\n      light: '#00d04c',\n      main: '#00d04c',\n      dark: '#00d04c',\n      contrastText: '#00d04c',\n    },\n  },\n});\n\nconst api = axios.create({\n  baseURL: \"https://gohiking-server.herokuapp.com/\",\n  // baseURL: \"https://go-hiking-backend-laravel.herokuapp.com/\",\n});\n\n\nexport default function Verify2(props){\n    const classes = useStyles();\n    // const { width } = props;\n\n    const [state , setState] = useState({\n      code_one:'',\n      code_two:'',\n      code_three:'',\n      code_four:'',\n      submitted:false,\n    })\n\n    const codeOneInput = useRef(null);\n    const codeTwoInput = useRef(null);\n    const codeThreeInput = useRef(null);\n    const codeFourInput = useRef(null);\n\n    var [number1, setNumber1] = useState(-1);\n    var [number2, setNumber2] = useState(-1);\n    var [number3, setNumber3] = useState(-1);\n    var [number4, setNumber4] = useState(-1);\n\n    const headers = {\n      'Email': localStorage.getItem('Email')\n    }\n    console.log(headers);\n\n    const handleCodeChange = (e) => {\n      const {id , value} = e.target\n      if(value.length < 2){\n          setState(prevState => ({\n              ...prevState,\n              [id] : value\n          }))\n          if(id=='code_one' && value.length >0){\n              setNumber1(number1 = value); \n              console.log(number1);\n              codeTwoInput.current.focus();\n          }\n          \n          if(id=='code_two' && value.length >0){\n              setNumber2(number2 = value); \n              console.log(number2);\n              codeThreeInput.current.focus();\n          }\n          if(id=='code_three' && value.length >0){             \n              setNumber3(number3 = value); \n              console.log(number3);\n              codeFourInput.current.focus();\n          }\n          if(id=='code_four' && value.length >0){              \n              setNumber4(number4 = value); \n              console.log(number4);\n        }\n      }\n    }\n        const backspaceTrigger = (e) =>{\n          if (e.keyCode === 8 && e.target.id ==='code_two'){\n            if(e.target.value != ''){\n              codeTwoInput.current.focus();\n            }else{\n              codeOneInput.current.focus();\n            }\n          }\n          if (e.keyCode === 8 && e.target.id ==='code_three'){\n            if(e.target.value != ''){\n              codeThreeInput.current.focus();\n            }else{\n              codeTwoInput.current.focus();\n            }\n          }\n          if (e.keyCode === 8 && e.target.id ==='code_four'){\n            if(e.target.value === ''){\n              codeThreeInput.current.focus();\n            } else{\n              codeFourInput.current.focus();\n            }\n            \n          }\n        }\n      //這邊開始處理input進來的文字\n        var [code, setCode] = useState({\n          \"verificationCode0\": null,\n          \"verificationCode1\": null,\n          \"verificationCode2\": null,\n          \"verificationCode3\": null,\n        })\n\n        const continueButton = async() => {\n          console.log(\"code is like this before: \"+ code);\n          setCode({\n            \"verificationCode0\": number1,\n            \"verificationCode1\": number2,\n            \"verificationCode2\": number3,\n            \"verificationCode3\": number4,\n          })\n          console.log(\"code is like this after: \"+ code);\n        }\n        \n        //這邊是處理code更新的部分\n        const firstUpdate = useRef(true);\n        useLayoutEffect(()=>{\n          if (firstUpdate.current){\n            firstUpdate.current = false;\n            return;\n          }    \n          console.log('code is like this Effect: ');\n          postBack();      \n        },[code]);\n      \n      // 這邊是POST的部分\n      const history = useHistory();\n      //const [token, setToken] = useState(-1);\n      const [error, setError] = useState('');\n      const [makesure, setMakesure] = useState('');\n\n      var responsedJson = '';\n        const postBack = async() =>{\n          console.log(code);\n          await api.post('api/password/confirm', code).then(function (response) {\n            console.log('驗證碼正確');\n            console.log(response.data);\n            localStorage.setItem('token', JSON.stringify(response.data));\n            console.log(JSON.parse(localStorage.getItem('token')));\n            console.log('得到token!');\n            console.log('ready to go');\n            history.push('/ResetPassword')\n          })\n          .catch(function (error) {\n            console.log('error');\n            responsedJson = error.response.data;\n            console.log('錯誤資訊如下: '+ responsedJson.error);\n            let errorText = \"錯誤資訊: \" + responsedJson.error;\n            setError(errorText);\n          })\n          .finally(function () {\n            console.log(responsedJson);\n          });  \n        }\n        //這裡是重寄驗證碼按鈕的部分\n        const emailHeaders = {\n          'email': localStorage.getItem('email')\n        }\n        const resentButton = async() =>{\n          setError('');\n          console.log(emailHeaders);\n          await api.post('api/password/forget', emailHeaders).then(function (response) {\n            console.log('重新寄送成功!');\n            setMakesure('重新寄送成功!');\n            responsedJson = response.data;\n          })\n          .catch(function (error) {\n            console.log('重新寄送失敗!');\n            let errorText = \"重新寄送失敗: \" + responsedJson.error;\n            setError(errorText);\n            responsedJson = error.response.data;\n          })\n          .finally(function () {\n            console.log(responsedJson);\n          });  \n        }\n        \n\n\n    return(        \n        <div className = {classes.container}>\n            <Typography style={{margin: '84px auto 0px', width: '123px', height: '36px', fontSize: '24px', fontWeight: '900'}}>輸入驗證碼</Typography>\n            <Typography style={{margin: '16px auto 0px', width: '379px', height: '42px', fontSize: '15px', fontWeight: '500', color: '#232323'}}>已把驗證碼發至您的信箱 johndoe@example.com，請確認您的信箱及輸入4位數驗證碼。</Typography>\n\n            <form className={classes.root} noValidate autoComplete=\"off\">\n              <ThemeProvider theme={bottomBoard}>\n                <TextField \n                  autoFocus\n                  className={classes.textField}\n                  id=\"code_one\"\n                  inputRef={codeOneInput} \n                  value={state.code_one}\n                  onChange={handleCodeChange}\n                  onKeyDown={backspaceTrigger}                  \n                />\n                <TextField                   \n                  className={classes.textField} \n                  id=\"code_two\"  \n                  inputRef={codeTwoInput}\n                  value={state.code_two}\n                  onChange={handleCodeChange}\n                  onKeyDown={backspaceTrigger}                  \n                />\n                <TextField \n                  className={classes.textField} \n                  id=\"code_three\"  \n                  inputRef={codeThreeInput}    \n                  value={state.code_three}              \n                  onChange={handleCodeChange}\n                  onKeyDown={backspaceTrigger} \n                />\n                <TextField \n                  className={classes.textField}\n                  id=\"code_four\" \n                  inputRef={codeFourInput} \n                  value={state.code_four}\n                  onChange={handleCodeChange} \n                  onKeyDown={backspaceTrigger} \n                  sytyle={{position:'relative', zIndex: '-10'}}           \n                />\n                </ThemeProvider>  \n            </form>\n\n            <Typography style={{margin: '16px auto 0 ',color: '#ff3b30' }}>{error} </Typography>\n            <Typography style={{margin: '0 auto 0 ',color: '#000000' }}>{makesure} </Typography>\n            <Button disabled= {state.submitted} onClick={continueButton}  variant = \"contained\"  style={{backgroundColor: '#00d04c',color: \"#ffffff\", fontWeight:\"700\" , borderColor: \"#00d04c\", width: \"92%\",maxWidth:\"379px\", Height: \"48px\", margin: \"27px auto 0\", borderRadius: '4px'}}>\n              繼續\n            </Button>\n            <Button variant = \"outlined\" onClick={resentButton} style={{color: \"#00d04c\", fontWeight:\"700\" , borderColor: \"#00d04c\",width: \"92%\",maxWidth:\"379px\", Height: \"48px\", margin: \"24px auto 0\", }}>\n              重新發送驗證碼\n            </Button>\n        </div>\n        \n        \n        );\n};\n\nVerify2.propTypes = {\n  width: PropTypes.oneOf(['lg', 'md', 'sm', 'xl', 'xs']).isRequired,\n};\n"],"sourceRoot":""}