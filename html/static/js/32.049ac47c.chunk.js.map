{"version":3,"sources":["pages/HikingFrontend/ResetPassword.js"],"names":["useStyles","makeStyles","theme","form","width","submit","height","margin","backgroundColor","color","borderRadius","container","padding","InputBackground","borderColor","Title","fontFamily","fontSize","fontweight","lineheight","letterspacing","Text","fontWeight","fontStretch","fontStyle","lineHeight","letterSpacing","Hint","ModifyTextFieldColor","DailogTitle","DailogContent","DailogCheck","ErrorInfo","SignIn","classes","React","useState","open","setOpen","maxWidth","useForm","register","handleSubmit","errors","watch","password","useRef","current","responsedJSON","setComfirm","axios","useHistory","require","handleClose","token","localStorage","getItem","console","log","substring","length","headers","onSubmit","data","a","post","then","response","catch","error","finally","className","textalign","inputRef","required","minLength","id","label","name","type","onChange","event","target","value","validate","confirm","message","variant","onClose","component","onClick"],"mappings":"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","file":"static/js/32.049ac47c.chunk.js","sourcesContent":["import React, { useRef } from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Page from 'material-ui-shell/lib/containers/Page';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControl from '@material-ui/core/FormControl';\nimport Input from '@material-ui/core/Input'\nimport { useForm } from 'react-hook-form';\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  form: {\n    width: '100%', // Fix IE 11 issue.\n  },\n  submit: {\n    width: '-webkit-fill-available',\n    height: '48px',\n    margin: '56px 0 0',\n    backgroundColor: '#00d04c',\n    color: '#ffffff',\n    borderRadius: 4\n  },\n  container: {\n    width: '-webkit-fill-available',\n    height: '768px',\n    padding: '125px 16px 213px',\n    backgroundColor: '#ffffff'\n  },\n  InputBackground:{\n    width: '-webkit-fill-available',\n    height: '40px',\n    margin: '1px 0 0',\n    padding: '9px 0 0',\n    borderColor:'#232323',\n  },\n  Title:{\n    width: '98px',\n    height: '36px',\n    margin: '0 281px 31px 0',\n    fontFamily: \"NotoSansCJKtc\",\n    fontSize: '24px',\n    fontweight: 500,\n    lineheight: 1.5,\n    letterspacing: '0.5px',\n    color: '#232323'\n  },\n  Text:{\n    width: '66px',\n    height:'24px',\n    margin: '0 313px 1px 0',\n    fontSize: '16px',\n    fontWeight: '500',\n    fontStretch: 'normal',\n    fontStyle: 'normal',\n    lineHeight: '1.5',\n    letterSpacing: '0.5px',\n    color: '#232323',\n  },\n  Hint:{\n    width: '180px',\n    height: '21px',\n    margin: '16px 211px 55px 0',\n    fontFamily: \"NotoSansCJKtc\",\n    fontSize: '14px',\n    fontWeight: 'normal',\n    fontStretch: 'normal',\n    fontStyle: 'normal',\n    lineHeight: '1.5',\n    letterSpacing: '0.5px',\n    color: '#979797',\n  },\n  ModifyTextFieldColor: {\n    fontSize: '14px',\n    color: '#979797',  \n    borderColor:'#979797'\n  },\n  DailogTitle:{\n    fontFamily: \"NotoSansCJKtc\",\n    fontSize: '20px',\n    fontWeight:500,\n    borderColor:'#232323'\n  },\n  DailogContent:{\n    fontFamily: \"NotoSansCJKtc\",\n    fontSize: '16px',\n    borderColor:'#979797'\n  },\n  DailogCheck:{\n    fontFamily: \"NotoSansCJKtc\",\n    fontSize: '14px',\n    fontWeight:500,\n    borderColor:'#007aff'\n  },\n  ErrorInfo:{\n    width: '100%',\n    height: '21px',\n    margin: '16px 263px 56px 0',\n    fontFamily: \"NotoSansCJKtc\",\n    fontSize: '14px',\n    fontWeight: 'normal',\n    fontStretch: 'normal',\n    fontStyle: 'normal',\n    lineHeight: '1.5',\n    letterSpacing: '0.5px',\n    color: '#ff3b30',\n  },\n}));\n\nexport default function SignIn() {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [maxWidth] = React.useState('xs');\n  const { register, handleSubmit, errors, watch } = useForm()\n  const password = useRef({});\n  password.current = watch(\"password\", \"\");\n  // const [password, setPassword] = React.useState(''); \n  const [comfirm, setComfirm] = React.useState('');\n  const history = useHistory()\n  const axios = require('axios');\n  let responsedJSON;\n\n  function backhandleClick() {\n    history.push(\"/signin\");\n  }\n\n  //Open Dailog\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    // backhandleClick()\n  };\n  //get token from verify\n  const token = localStorage.getItem('token')\n  console.log(token.substring(10, token.length - 2))\n  // console.log('token: ' + localStorage.getItem('token'));\n  const headers = {\n    'Authorization': 'Bearer '+token.substring(10, token.length - 2)\n  }\n  console.log(headers);\n  // API POST\n  const onSubmit = async (data) => {\n    console.log(data);\n    await axios.post('https://gohiking-server.herokuapp.com/api/password/change', data ,{ headers })\n    .then(function (response) {\n      console.log('correct');\n      //const { token } = response.data;\n      responsedJSON = response.data\n      handleClickOpen(true);\n      //localStorage.setItem('token', token)\n    })\n    .catch(function (error) {\n      console.log('error');\n      responsedJSON = error.response.data;\n    })\n    .finally(function () {\n      console.log(responsedJSON);\n    });  \n  }\n\n  return (\n      <div className={classes.container}>\n        <Typography className={classes.Title} textalign=\"left\">\n          重設密碼\n        </Typography>\n        <form className={classes.form} onSubmit={handleSubmit(onSubmit)} >\n        <Typography className={classes.Text}  textalign=\"left\">\n          密碼 \n        </Typography>   \n          <Input\n            // onChange={event => setPassword(event.target.value)}\n            inputRef={register({ required: true, minLength: 8 })}\n            className={classes.InputBackground}\n            id=\"password\"\n            label=\"請輸入新的密碼\"\n            name=\"password\"\n            type=\"password\"\n          />\n        <Typography className={classes.ErrorInfo} >\n          {errors.password && \"密碼必須包含8個字元以上\"}\n        </Typography> \n        <Typography className={classes.Text}  textalign=\"left\">\n          確認密碼\n        </Typography>  \n          <Input\n            onChange={event => setComfirm(event.target.value)}\n            className={classes.InputBackground}\n            id=\"confirm\"\n            label=\"請重新輸入密碼 \"\n            name=\"confirm\"\n            type=\"password\"\n            inputRef={register({ \n              validate: value =>\n              value === password.current || \"密碼不一致！\" \n              })}\n          />\n        <Typography className={classes.ErrorInfo}>\n          {errors.confirm && <p>{errors.confirm.message}</p>}\n        </Typography> \n        <Button\n            type=\"submit\"\n            variant=\"contained\"\n            className={classes.submit}\n            // onClick={handleClickOpen }\n          >\n          繼續\n        </Button>\n        <Dialog\n          maxWidth={maxWidth}\n          open={open}\n          onClose={handleClose}\n        >\n          <DialogTitle>\n          <Typography component={'span'} className={classes.DailogTitle}>密碼更新成功</Typography>\n          </DialogTitle>\n          <DialogContent >\n            <DialogContentText>\n              <Typography component={'span'} className={classes.DailogContent}>請重新以新的密碼登入使用。</Typography>\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\"  >\n            <Typography component={'span'} className={classes.DailogCheck}>完成</Typography>\n            </Button>\n          </DialogActions>\n      </Dialog>\n      </form>\n    </div>\n  );\n}"],"sourceRoot":""}